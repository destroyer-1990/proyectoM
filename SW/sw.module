<?php
/**
 * @file
 * Archivo para empezar a programar con Drupal
 */

/**
 * Implementa hook_menu().
 */
function sw_menu() {
  $items['sw/rest'] = array(
    'title' => 'Saludar',
    'page callback' => 'sw_rest',
    'access callback' => TRUE,
  );
  return $items;
}

/**
 * Callback que implementa la pÃ¡ina: saludar/hola-mundo.
 */
function sw_rest() {
 	


  $nid = 1;
	$node = node_load($nid);                                 
  print($node->uid);
  echo '<br>';
  $fecha = getdate( $node->created );
  echo ( $fecha["mday"]."-");
  echo ( $fecha["mon"]. "-");
  echo ( $fecha["year"]);
  echo '<br>';
  
  print($node->title);
  echo '<br>';

  print($node->language);
  echo '<br>';

  $body = field_get_items('node',$node, 'body');
  print $body[0]['value'];
  echo '<br>';

  $body = field_get_items('node',$node, 'field_image');
  print ($body[0]['filename']);
  echo '<br>';
  
  $body = field_get_items('node',$node, 'field_image');
  print $body[0]['uri'];
  echo '<br>';
  
  $result = db_select('comment') ->fields('comment', array('cid')) ->condition('nid', $node->nid, '=') ->execute();
  $cids = $result->fetchCol();
  $comments=comment_load_multiple($cids);
  foreach($comments as $comment){
    //do some stuff with the comment
    print $comment->comment_body ["und"][0] ["value"];
  }
  #print_r($node);

  $comment = (object) array(
    'nid' => 1,
    #'cid' => 0,
    #'pid' => 0,
    #'uid' => 1,
    #'mail' => '',
    'is_anonymous' => 1,
    #'homepage' => '',
    'status' => COMMENT_PUBLISHED,
    #'subject' => 'dsk subject',
    'language' => LANGUAGE_NONE,
    'comment_body' => array(
      LANGUAGE_NONE => array(
        0 => array (
          'value' => 'fracaso 3 :D',
          'format' => 'filtered_html'
        )
      )
    ),
  );
  comment_submit($comment);
  comment_save($comment);


}
?>
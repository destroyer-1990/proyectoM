<?php
/**
 * Implementa hook_menu().
 */

function sw_menu() {

  $items['sw/rest'] = array(
    'title' => 'Saludar',
    'page callback' => 'sw_rest',
    'access callback' => TRUE,
  );
  return $items;
}

/**
 * Callback que implementa la p치ina: sw/rest
 */
function sw_rest() {

  $aux=  include_once('node.php'); 
  if (!$aux ) {
	 $arr = 
	    array(
	        "fecha" =>" ",
	        "titulo" => ' ',
	        "lenguaje" => ' ',
	        "contenido" => ' ',
	        "imagen" => ' ',
	        "comentarios" =>' '    
	  );
	  return json_encode($arr);
  }

  $obj = new nodo();
  //variables post vacias
  if(empty($_POST['index']) && empty($_POST['idNode']) && empty($_POST['comentario']) ){ 
    $obj->jsonEmpty();
  } 

  //informaci칩n b치sica de todos los nodos
  if (!empty($_POST["index"]) && empty($_POST["idNode"]) && empty($_POST["comentario"])) {
        $obj->getAll();
  }

  //Para obtener el nodo, o publicacio칩n
  if(!empty($_POST["idNode"]) && empty($_POST["comentario"]) && empty($_POST["index"])){
    if ($_POST["idNode"] < 10 && $_POST["idNode"] > 0)
	   $obj->getNode($_POST["idNode"]);
    else
      $obj->jsonEmpty();   
  }
  
  //Agregar comentarios
  if(!empty($_POST["comentario"]) && !empty($_POST["idNode"]) && empty($_POST["index"]) ) {
	#require_once('comments.php'); 
	$obj->addComment($_POST["comentario"],$_POST["idNode"]);
  }


}


?>
